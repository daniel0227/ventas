<!-- core/templates/core/reportes.html -->
{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<h3 class="text-center mb-4">Reportes</h3>

<form method="get" class="row g-3 mb-4">
  <div class="col-md-4">
    <label for="start_date" class="form-label">Fecha inicio</label>
    <input type="date" class="form-control" name="start_date" ... value="{{ start_date }}">
  </div>
  <div class="col-md-4">
    <label for="end_date" class="form-label">Fecha fin</label>
    <input type="date" class="form-control" name="end_date" ... value="{{ end_date }}">
  </div>
  <div class="col-md-4 d-flex align-items-end">
    <button type="submit" class="btn btn-primary w-100">Filtrar</button>
  </div>
</form>

{% if not data %}
  <div class="alert alert-info">No hay ventas registradas para el rango seleccionado.</div>
{% endif %}

<div id="ventasChart" style="height: 400px;"></div>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    Highcharts.chart('ventasChart', {
      chart: {
        type: 'column'
      },
      title: {
        text: 'Ventas por Vendedor'
      },
      xAxis: {
        categories: {{ labels|safe }},
        title: { text: 'Vendedores' }
      },
      yAxis: {
        min: 0,
        title: { text: 'Total Vendido (COP)' }
      },
      tooltip: {
        valuePrefix: '$ '
      },
      series: [{
        name: 'Ventas',
        data: {{ data|safe }}
      }]
    });
  });
</script>
{% endblock %}
